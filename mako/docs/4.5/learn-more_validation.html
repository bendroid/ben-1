


<!--<!DOCTYPE html>-->
<html>
	
<!-- Mirrored from makoframework.com/docs/4.5/learn-more:validation by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Aug 2015 15:42:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

		<title>Documentation - 4.5 - Mako Framework</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="shortcut icon" href="../../assets/img/favicon.ico">
		<link type="text/css" rel="stylesheet" href="../../assets/css/materialize.min.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/font-awesome.min.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/animate.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/mako.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/backtotop.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/prism.css"  media="screen,projection"/>

		<script>
			var mako = {'base_url': 'http://makoframework.com/'};
		</script>

		<script>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-19891169-1']);
		_gaq.push(['_setDomainName', '.makoframework.com']);
		_gaq.push(['_trackPageview']);
		(function()
		{
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>

	</head>

	<body>

		<ul id="source-dropdown" class="dropdown-content nav-dropdown">
			<li><a href="../../contributing/contributors.html">Contributors</a></li>
			<li><a href="https://github.com/mako-framework">View on GitHub</a></li>
		</ul>

		<nav id="nav" class="grey darken-3-5">
			<div class="container">
				<div class="nav-wrapper">
					<a href="../../index.html" class="brand-logo"><img src="../../assets/img/logo50.png" alt="Mako"></a>
					<ul id="nav-mobile" class="right side-nav">
						<li><a href="../4.html">Documentation</a></li>
						<li><a href="http://api.makoframework.com/">API</a></li>
						<li>
							<a class="dropdown-button" href="#!" data-activates="source-dropdown">Source<i class="mdi-navigation-arrow-drop-down right"></i></a>
						</li>
						<li><a href="https://github.com/mako-framework/framework/issues">Issues</a></li>
						<li><a href="http://forum.makoframework.com/">Community</a></li>
						<li><a href="#!" id="toggle-search"><i class="large mdi-action-search"></i></a></li>
					</ul>
					<a class="button-collapse" href="#" data-activates="nav-mobile"><i class="mdi-navigation-menu"></i></a>
				</div>
			</div>
		</nav>

		<div class="row white-text grey darken-3" id="search">

			<div class="container">
				<form action="https://www.google.com/search" method="get">
					<input class="form-control" type="text" name="q" placeholder="Search ...">
					<input type="hidden" name="as_sitesearch" value="makoframework.com">
				</form>
			</div>

		</div>

		<div id="content">

			
		<div class="row white z-depth-1" id="tab-wrapper">
			<div class="container">
				<div class="row tabs">
											<div class="col s12 m3 active"><p><a href="../4.html">4.5</a></p></div>
											<div class="col s12 m3 "><p><a href="../4-2.html">4.4</a></p></div>
											<div class="col s12 m3 "><p><a href="../4-3.html">4.3</a></p></div>
										<div class="col s12 m3 ">
						<select id="legacy-docs">
							<option value="" disabled selected>Older</option>
															<option value="http://makoframework.com/docs/4.2">4.2</option>
															<option value="http://makoframework.com/docs/4.1">4.1</option>
															<option value="http://makoframework.com/docs/4.0">4.0</option>
															<option value="http://makoframework.com/docs/3.6">3.6</option>
													</select>
					</div>
				</div>
			</div>
		</div>



			
	<div class="container">

		<button class="grey lighten-2 waves-effect waves-light btn-flat" type="submit" name="action" id="toggle-menu">Open Menu</button>

		<div class="row content">
			<div class="col l3 m12 s12 left-menu">

				<div id="left-nav">
				
					
							<div class="menu-header">Getting started</div>

							<div class="menu-items">

								
									<p>
										<a  href="getting-started_installation.html">
											Installation										</a>
									</p>

								
									<p>
										<a  href="getting-started_configuration.html">
											Configuration										</a>
									</p>

								
									<p>
										<a  href="getting-started_dependency-injection.html">
											Dependency injection										</a>
									</p>

								
									<p>
										<a  href="getting-started_error-handling.html">
											Error handling										</a>
									</p>

								
									<p>
										<a  href="getting-started_constants.html">
											Constants										</a>
									</p>

								
									<p>
										<a  href="getting-started_coding-standards.html">
											Coding standards										</a>
									</p>

								
									<p>
										<a  href="getting-started_upgrading.html">
											Upgrading										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Routing and controllers</div>

							<div class="menu-items">

								
									<p>
										<a  href="routing-and-controllers_routing.html">
											Routing										</a>
									</p>

								
									<p>
										<a  href="routing-and-controllers_controllers.html">
											Controllers										</a>
									</p>

								
									<p>
										<a  href="routing-and-controllers_request.html">
											Request										</a>
									</p>

								
									<p>
										<a  href="routing-and-controllers_response.html">
											Response										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Command line</div>

							<div class="menu-items">

								
									<p>
										<a  href="command-line_basics.html">
											Basics										</a>
									</p>

								
									<p>
										<a  href="command-line_custom-commands.html">
											Custom commands										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Databases (SQL)</div>

							<div class="menu-items">

								
									<p>
										<a  href="databases-sql_basics.html">
											Basics										</a>
									</p>

								
									<p>
										<a  href="databases-sql_query-builder.html">
											Query builder										</a>
									</p>

								
									<p>
										<a  href="databases-sql_orm.html">
											Orm										</a>
									</p>

								
									<p>
										<a  href="databases-sql_migrations.html">
											Migrations										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Databases (NoSQL)</div>

							<div class="menu-items">

								
									<p>
										<a  href="databases-nosql_redis.html">
											Redis										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Security</div>

							<div class="menu-items">

								
									<p>
										<a  href="security_authentication.html">
											Authentication										</a>
									</p>

								
									<p>
										<a  href="security_password-hashing.html">
											Password hashing										</a>
									</p>

								
									<p>
										<a  href="security_encryption-and-signing.html">
											Encryption and signing										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Packages</div>

							<div class="menu-items">

								
									<p>
										<a  href="packages_packages.html">
											Packages										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Learn more</div>

							<div class="menu-items">

								
									<p>
										<a  href="learn-more_array-helper.html">
											Array helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_caching.html">
											Caching										</a>
									</p>

								
									<p>
										<a  href="learn-more_command-bus.html">
											Command bus										</a>
									</p>

								
									<p>
										<a  href="learn-more_date-and-time.html">
											Date and time										</a>
									</p>

								
									<p>
										<a  href="learn-more_events.html">
											Events										</a>
									</p>

								
									<p>
										<a  href="learn-more_file-system.html">
											File system										</a>
									</p>

								
									<p>
										<a  href="learn-more_html-helper.html">
											Html helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_humanizer.html">
											Humanizer										</a>
									</p>

								
									<p>
										<a  href="learn-more_image-manipulation.html">
											Image manipulation										</a>
									</p>

								
									<p>
										<a  href="learn-more_internationalization.html">
											Internationalization										</a>
									</p>

								
									<p>
										<a  href="learn-more_logging.html">
											Logging										</a>
									</p>

								
									<p>
										<a  href="learn-more_number-helper.html">
											Number helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_pagination.html">
											Pagination										</a>
									</p>

								
									<p>
										<a  href="learn-more_sessions.html">
											Sessions										</a>
									</p>

								
									<p>
										<a  href="learn-more_string-helper.html">
											String helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_url-builder.html">
											Url builder										</a>
									</p>

								
									<p>
										<a  href="learn-more_uuid-helper.html">
											Uuid helper										</a>
									</p>

								
									<p>
										<a  class="active" href="learn-more_validation.html">
											Validation										</a>
									</p>

								
									<p>
										<a  href="learn-more_views.html">
											Views										</a>
									</p>

								
							</div>

									</div>

			</div>
			<div class="col l9 m12 s12">
				<div class="page-content">
					<h1>Validation</h1>

<hr />

<ul>
<li><a href="#usage">Usage</a></li>
<li><a href="#validation_rules">Validation rules</a></li>
<li><a href="#custom_messages">Custom messages</a></li>
<li><a href="#validator_plugins">Validator plugins</a></li>
</ul>

<hr />

<p>The mako validator provides a simple and consistent way of validating user input.</p>

<hr />

<p><a id="usage"></a></p>

<h3>Usage</h3>

<p>First you need to define a set of rules you want to use to validate the input.</p>

<pre><code>$rules =
[
    'username' =&gt; ['required', 'min_length:4', 'max_length:20'],
    'password' =&gt; ['required'],
    'email'    =&gt; ['required', 'email'],
];
</code></pre>

<p>The rules defined above will make sure that the username, password and email fields are filled in. That the username is between 4 and 20 characters long, and that the email field contains a valid email address.</p>

<p>If all of your fields have one or more rule in common, then you can use the <code>*</code> shortcut.</p>

<pre><code>$rules =
[
    '*'        =&gt; ['required'],
    'username' =&gt; ['min_length:4', 'max_length:20'],
    'email'    =&gt; ['email'],
];
</code></pre>

<blockquote>
  <p>Only non-empty fields or fields marked as required are validated.</p>
</blockquote>

<p>Next you'll need to create a validation object. The first parameter is the input data you want to validate and the second is the validation rules.</p>

<pre><code>$validator = $this-&gt;validator-&gt;create($this-&gt;request-&gt;post(), $rules);
</code></pre>

<p>Now you need to check if the input data is valid using the <code>isValid</code> method.</p>

<pre><code>if($validator-&gt;isValid())
{
    // Save to database
}
else
{
    // Handle errors
}
</code></pre>

<p>You can also use the <code>isInvalid</code> method.</p>

<pre><code>if($validator-&gt;isInvalid())
{
    // Handle errors
}
else
{
    // Save to database
}
</code></pre>

<p>Retrieving errors is done using the <code>getErrors</code> method.</p>

<pre><code>$errors = $validator-&gt;getErrors();
</code></pre>

<p>Or by using the optional <code>$errors</code> parameter of the <code>isValid</code> and <code>isInvalid</code> methods.</p>

<pre><code>if($validator-&gt;isValid($errors))
{
    // Save to database
}
else
{
    var_dump($errors);
}
</code></pre>

<blockquote>
  <p>An empty array will be returned if there are no errors.</p>
</blockquote>

<hr />

<p><a id="validation_rules"></a></p>

<h3>Validation rules</h3>

<p>The following validation rules are included with Mako:</p>

<table class="bordered striped">
<thead>
<tr>
  <th>Name</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>required</td>
  <td>Checks that the field isn't empty.</td>
</tr>
<tr>
  <td>min_length</td>
  <td>Checks that the field value is long enough (<code>min_length:10</code>).</td>
</tr>
<tr>
  <td>max_length</td>
  <td>Checks that the field value is short enough (<code>max_length:20</code>).</td>
</tr>
<tr>
  <td>exact_length</td>
  <td>Checks that the field value is of the right length (<code>exact_length:20</code>).</td>
</tr>
<tr>
  <td>less_than</td>
  <td>Checks that the field value is less than x (<code>less_than:5</code>).</td>
</tr>
<tr>
  <td>less_than_or_equal_to</td>
  <td>Checks that the field value is less than or equal to x (<code>less_than_or_equal_to:5</code>).</td>
</tr>
<tr>
  <td>greater_than</td>
  <td>Checks that the field value is greater than x (<code>greater_than:5</code>).</td>
</tr>
<tr>
  <td>greater_than_or_equal_to</td>
  <td>Checks that the field value is greater than or equal to x (<code>greater_than_or_equal_to:5</code>).</td>
</tr>
<tr>
  <td>between</td>
  <td>Checks that the field value is between x and y (<code>between:[5,10]</code>).</td>
</tr>
<tr>
  <td>match</td>
  <td>Checks that the field value matches the value of another field (<code>match:"password_confirmation"</code>).</td>
</tr>
<tr>
  <td>different</td>
  <td>Checks that the field value is different from the value of another field (<code>different:"old_password"</code>).</td>
</tr>
<tr>
  <td>regex</td>
  <td>Checks that the field value matches a regex pattern (<code>regex:"/[a-z]+/i"</code>).</td>
</tr>
<tr>
  <td>integer</td>
  <td>Checks that the field value is a integer.</td>
</tr>
<tr>
  <td>float</td>
  <td>Checks that the field value is a float.</td>
</tr>
<tr>
  <td>natural</td>
  <td>Checks that the field value is a natural.</td>
</tr>
<tr>
  <td>natural_non_zero</td>
  <td>Checks that the field value is a natural non zero.</td>
</tr>
<tr>
  <td>hex</td>
  <td>Checks that the field value is valid HEX.</td>
</tr>
<tr>
  <td>alpha</td>
  <td>Checks that the field value only contains valid alpha characters.</td>
</tr>
<tr>
  <td>alpha_unicode</td>
  <td>Checks that the field value only contains valid alpha unicode characters.</td>
</tr>
<tr>
  <td>alphanumeric</td>
  <td>Checks that the field value only contains valid alphanumeric characters.</td>
</tr>
<tr>
  <td>alphanumeric_unicode</td>
  <td>Checks that the field value only contains valid alphanumeric unicode characters.</td>
</tr>
<tr>
  <td>alpha_dash</td>
  <td>Checks that the field value only contains valid alphanumeric, dash and underscore characters.</td>
</tr>
<tr>
  <td>alpha_dash_unicode</td>
  <td>Checks that the field value only contains valid alphanumeric unicode, dash and underscore characters.</td>
</tr>
<tr>
  <td>email</td>
  <td>Checks that the field value is a valid email address (uses PHP's filter_var function).</td>
</tr>
<tr>
  <td>email_domain</td>
  <td>Checks that the field value contains a valid MX record.</td>
</tr>
<tr>
  <td>ip</td>
  <td>Checks that the field value is an IP address (uses PHP's filter_var function).</td>
</tr>
<tr>
  <td>url</td>
  <td>Checks that the field value is a valid URL (uses PHP's filter_var function).</td>
</tr>
<tr>
  <td>in</td>
  <td>Checks that the field value contains one of the given values (<code>in:[["foo","bar","baz"]]</code>).</td>
</tr>
<tr>
  <td>not_in</td>
  <td>Checks that the field value does not contain one of the given values (<code>not_in:[["foo","bar","baz"]]</code>).</td>
</tr>
<tr>
  <td>date</td>
  <td>Checks that the field value is a valid date (<code>date:"Y-m-d"</code>).</td>
</tr>
<tr>
  <td>before</td>
  <td>Checks that the field value is a valid date before the provided date (<code>before:["Y-m-d","2012-09-25"]</code>).</td>
</tr>
<tr>
  <td>after</td>
  <td>Checks that the field value is a valid date after the provided date (<code>after:["Y-m-d","2012-09-25"]</code>).</td>
</tr>
<tr>
  <td>token</td>
  <td>Checks that the field value matches a valid session token.</td>
</tr>
<tr>
  <td>one_time_token</td>
  <td>Checks that the field value matches a valid session one time token.</td>
</tr>
<tr>
  <td>uuid</td>
  <td>Checks that the field value matches a valid uuid.</td>
</tr>
<tr>
  <td>unique</td>
  <td>Checks that the field value doesn't exist in the database (<code>unique:["users","email"]</code>).</td>
</tr>
<tr>
  <td>exists</td>
  <td>Checks that the field value exist in the database (<code>exists:["users","email"]</code>).</td>
</tr>
</tbody>
</table>

<hr />

<p><a id="custom_messages"></a></p>

<h3>Custom messages</h3>

<p>All error messages are defined in the <code>app/i18n/*/strings/validate.php</code> language file.</p>

<p>Adding custom field specific error messages can be done using the <code>overrides.messages</code> array:</p>

<pre><code>'overrides' =&gt; array
(
    'messages' =&gt; array
    (
        'username' =&gt; array
        (
            'required' =&gt; 'You need a username!',
        ),
    ),
),
</code></pre>

<p>You can also add custom field name translations using the <code>overrides.fieldnames</code> array:</p>

<pre><code>'overrides' =&gt; array
(
    'fieldnames' =&gt; array
    (
        'email' =&gt; 'email address',
    ),
),
</code></pre>

<hr />

<p><a id="validator_plugins"></a></p>

<h3>Validator plugins</h3>

<p>You can create your own custom validator plugins. They must extend the <code>mako\validator\plugins\ValidatorPlugin</code> class and implement the <code>mako\validator\plugins\ValidatorPluginInterface</code> interface.</p>

<pre><code>&lt;?php

use mako\validator\plugins\ValidatorPlugin;
use mako\validator\plugins\ValidatorPluginInterface;

class IsFooValidator extends ValidatorPlugin implements ValidatorPluginInterface
{
    protected $ruleName = 'is_foo';

    public function validate($input)
    {
        return mb_strtolower($input) === 'foo';
    }
}
</code></pre>

<blockquote>
  <p>Prefix the <code>$ruleName</code> value with your package name and two colons (<code>::</code>) if your validator is a part of a <a href="packages_packages.html#configuration_i18n_and_views">package</a>.</p>
</blockquote>

<p>You can register the plugin with the validation factory, thus making it avaiable to all future validator instances.</p>

<pre><code>$this-&gt;validator-&gt;registerPlugin(new IsFooValidator);
</code></pre>

<p>You can also register it into an existing validator instance.</p>

<pre><code>$validator-&gt;registerPlugin(new IsFooValidator);
</code></pre>
				</div>
			</div>
		</div>
	</div>


		</div>

		<footer>
			<div class="container">
				<div class="row">
					<div class="col l6 s12">
						<h5 class="white-text">Git</h5>
						<p class="grey-text lighten-4 github"></p>
						<p>
							<a href="https://travis-ci.org/mako-framework/framework">
								<img src="https://travis-ci.org/mako-framework/framework.svg?branch=master" alt="">
							</a>
						</p>
						<p>
							<a class="waves-effect waves-light btn grey darken-1" href="https://github.com/mako-framework/framework/issues">
								<span id="open-issues">?</span> Open Issues
							</a>
							<a class="waves-effect waves-light btn grey darken-1" href="https://github.com/mako-framework/framework/pulls">
								<span id="pull-requests">?</span> Pull Requests
							</a>
						</p>
					</div>
					<div class="col l4 offset-l2 s12">
						<h5 class="white-text">Links</h5>
						<ul>
							<li><a class="grey-text lighten-3" href="../../index.html">Home</a></li>
							<li><a class="grey-text lighten-3" href="../../changelog.html">Changelog</a></li>
							<li><a class="grey-text lighten-3" href="../4.html">Documentation</a></li>
							<li><a class="grey-text lighten-3" href="http://api.makoframework.com/">API</a></li>
							<li><a class="grey-text lighten-3" href="https://github.com/mako-framework/framework/issues">Issues</a></li>
							<li><a class="grey-text lighten-3" href="http://forum.makoframework.com/">Community</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="footer-copyright">
				<div class="container">
					© 2015 Frederic G. Østby - All Rights Reserved
					<a class="grey-text lighten-4 right" href="https://twitter.com/makoframework">&nbsp;<i class="fa fa-twitter"></i></a>
					<a class="grey-text lighten-4 right" href="https://github.com/mako-framework">&nbsp;<i class="fa fa-github-alt"></i></a>
				</div>
			</div>
		</footer>

		<a href="#0" class="cd-top">Top</a>

		<script type="text/javascript" src="../../assets/js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="../../assets/js/jquery-ui.min.js"></script>
		<script type="text/javascript" src="../../assets/js/materialize.min.js"></script>
		<script type="text/javascript" src="../../assets/js/timeago.min.js"></script>
		<script type="text/javascript" src="../../assets/js/mako.js"></script>
		<script type="text/javascript" src="../../assets/js/prism.js"></script>
		<script type="text/javascript" src="../../assets/js/backtotop.js"></script>

	</body>

<!-- Mirrored from makoframework.com/docs/4.5/learn-more:validation by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Aug 2015 15:42:10 GMT -->
</html>