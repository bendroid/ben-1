


<!--<!DOCTYPE html>-->
<html>
	
<!-- Mirrored from makoframework.com/docs/4.5/command-line:custom-commands by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Aug 2015 15:42:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

		<title>Documentation - 4.5 - Mako Framework</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="shortcut icon" href="../../assets/img/favicon.ico">
		<link type="text/css" rel="stylesheet" href="../../assets/css/materialize.min.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/font-awesome.min.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/animate.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/mako.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/backtotop.css"  media="screen,projection"/>
		<link type="text/css" rel="stylesheet" href="../../assets/css/prism.css"  media="screen,projection"/>

		<script>
			var mako = {'base_url': 'http://makoframework.com/'};
		</script>

		<script>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-19891169-1']);
		_gaq.push(['_setDomainName', '.makoframework.com']);
		_gaq.push(['_trackPageview']);
		(function()
		{
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
		</script>

	</head>

	<body>

		<ul id="source-dropdown" class="dropdown-content nav-dropdown">
			<li><a href="../../contributing/contributors.html">Contributors</a></li>
			<li><a href="https://github.com/mako-framework">View on GitHub</a></li>
		</ul>

		<nav id="nav" class="grey darken-3-5">
			<div class="container">
				<div class="nav-wrapper">
					<a href="../../index.html" class="brand-logo"><img src="../../assets/img/logo50.png" alt="Mako"></a>
					<ul id="nav-mobile" class="right side-nav">
						<li><a href="../4.html">Documentation</a></li>
						<li><a href="http://api.makoframework.com/">API</a></li>
						<li>
							<a class="dropdown-button" href="#!" data-activates="source-dropdown">Source<i class="mdi-navigation-arrow-drop-down right"></i></a>
						</li>
						<li><a href="https://github.com/mako-framework/framework/issues">Issues</a></li>
						<li><a href="http://forum.makoframework.com/">Community</a></li>
						<li><a href="#!" id="toggle-search"><i class="large mdi-action-search"></i></a></li>
					</ul>
					<a class="button-collapse" href="#" data-activates="nav-mobile"><i class="mdi-navigation-menu"></i></a>
				</div>
			</div>
		</nav>

		<div class="row white-text grey darken-3" id="search">

			<div class="container">
				<form action="https://www.google.com/search" method="get">
					<input class="form-control" type="text" name="q" placeholder="Search ...">
					<input type="hidden" name="as_sitesearch" value="makoframework.com">
				</form>
			</div>

		</div>

		<div id="content">

			
		<div class="row white z-depth-1" id="tab-wrapper">
			<div class="container">
				<div class="row tabs">
											<div class="col s12 m3 active"><p><a href="../4.html">4.5</a></p></div>
											<div class="col s12 m3 "><p><a href="../4-2.html">4.4</a></p></div>
											<div class="col s12 m3 "><p><a href="../4-3.html">4.3</a></p></div>
										<div class="col s12 m3 ">
						<select id="legacy-docs">
							<option value="" disabled selected>Older</option>
															<option value="http://makoframework.com/docs/4.2">4.2</option>
															<option value="http://makoframework.com/docs/4.1">4.1</option>
															<option value="http://makoframework.com/docs/4.0">4.0</option>
															<option value="http://makoframework.com/docs/3.6">3.6</option>
													</select>
					</div>
				</div>
			</div>
		</div>



			
	<div class="container">

		<button class="grey lighten-2 waves-effect waves-light btn-flat" type="submit" name="action" id="toggle-menu">Open Menu</button>

		<div class="row content">
			<div class="col l3 m12 s12 left-menu">

				<div id="left-nav">
				
					
							<div class="menu-header">Getting started</div>

							<div class="menu-items">

								
									<p>
										<a  href="getting-started_installation.html">
											Installation										</a>
									</p>

								
									<p>
										<a  href="getting-started_configuration.html">
											Configuration										</a>
									</p>

								
									<p>
										<a  href="getting-started_dependency-injection.html">
											Dependency injection										</a>
									</p>

								
									<p>
										<a  href="getting-started_error-handling.html">
											Error handling										</a>
									</p>

								
									<p>
										<a  href="getting-started_constants.html">
											Constants										</a>
									</p>

								
									<p>
										<a  href="getting-started_coding-standards.html">
											Coding standards										</a>
									</p>

								
									<p>
										<a  href="getting-started_upgrading.html">
											Upgrading										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Routing and controllers</div>

							<div class="menu-items">

								
									<p>
										<a  href="routing-and-controllers_routing.html">
											Routing										</a>
									</p>

								
									<p>
										<a  href="routing-and-controllers_controllers.html">
											Controllers										</a>
									</p>

								
									<p>
										<a  href="routing-and-controllers_request.html">
											Request										</a>
									</p>

								
									<p>
										<a  href="routing-and-controllers_response.html">
											Response										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Command line</div>

							<div class="menu-items">

								
									<p>
										<a  href="command-line_basics.html">
											Basics										</a>
									</p>

								
									<p>
										<a  class="active" href="command-line_custom-commands.html">
											Custom commands										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Databases (SQL)</div>

							<div class="menu-items">

								
									<p>
										<a  href="databases-sql_basics.html">
											Basics										</a>
									</p>

								
									<p>
										<a  href="databases-sql_query-builder.html">
											Query builder										</a>
									</p>

								
									<p>
										<a  href="databases-sql_orm.html">
											Orm										</a>
									</p>

								
									<p>
										<a  href="databases-sql_migrations.html">
											Migrations										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Databases (NoSQL)</div>

							<div class="menu-items">

								
									<p>
										<a  href="databases-nosql_redis.html">
											Redis										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Security</div>

							<div class="menu-items">

								
									<p>
										<a  href="security_authentication.html">
											Authentication										</a>
									</p>

								
									<p>
										<a  href="security_password-hashing.html">
											Password hashing										</a>
									</p>

								
									<p>
										<a  href="security_encryption-and-signing.html">
											Encryption and signing										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Packages</div>

							<div class="menu-items">

								
									<p>
										<a  href="packages_packages.html">
											Packages										</a>
									</p>

								
							</div>

					
							<div class="menu-header">Learn more</div>

							<div class="menu-items">

								
									<p>
										<a  href="learn-more_array-helper.html">
											Array helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_caching.html">
											Caching										</a>
									</p>

								
									<p>
										<a  href="learn-more_command-bus.html">
											Command bus										</a>
									</p>

								
									<p>
										<a  href="learn-more_date-and-time.html">
											Date and time										</a>
									</p>

								
									<p>
										<a  href="learn-more_events.html">
											Events										</a>
									</p>

								
									<p>
										<a  href="learn-more_file-system.html">
											File system										</a>
									</p>

								
									<p>
										<a  href="learn-more_html-helper.html">
											Html helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_humanizer.html">
											Humanizer										</a>
									</p>

								
									<p>
										<a  href="learn-more_image-manipulation.html">
											Image manipulation										</a>
									</p>

								
									<p>
										<a  href="learn-more_internationalization.html">
											Internationalization										</a>
									</p>

								
									<p>
										<a  href="learn-more_logging.html">
											Logging										</a>
									</p>

								
									<p>
										<a  href="learn-more_number-helper.html">
											Number helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_pagination.html">
											Pagination										</a>
									</p>

								
									<p>
										<a  href="learn-more_sessions.html">
											Sessions										</a>
									</p>

								
									<p>
										<a  href="learn-more_string-helper.html">
											String helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_url-builder.html">
											Url builder										</a>
									</p>

								
									<p>
										<a  href="learn-more_uuid-helper.html">
											Uuid helper										</a>
									</p>

								
									<p>
										<a  href="learn-more_validation.html">
											Validation										</a>
									</p>

								
									<p>
										<a  href="learn-more_views.html">
											Views										</a>
									</p>

								
							</div>

									</div>

			</div>
			<div class="col l9 m12 s12">
				<div class="page-content">
					<h1>Custom commands</h1>

<hr />

<ul>
<li><a href="#basics">Basics</a>

<ul>
<li><a href="#basics:getting-started">Getting started</a></li>
<li><a href="#basics:registering-commands">Registering commands</a></li>
<li><a href="#basics:arguments-and-options">Arguments and options</a></li>
</ul></li>
<li><a href="#input">Input</a>

<ul>
<li><a href="#input:helpers">Helpers</a></li>
</ul></li>
<li><a href="#output">Output</a>

<ul>
<li><a href="#output:helpers">Helpers</a></li>
<li><a href="#output:formatting">Formatting</a></li>
</ul></li>
<li><a href="#dependency_injection">Dependency injection</a></li>
</ul>

<hr />

<p>The Mako command line tool comes with a set of useful commands but you can also create your own.</p>

<hr />

<p><a id="basics"></a></p>

<h3>Basics</h3>

<p><a id="basics:getting-started"></a></p>

<h4>Getting started</h4>

<p>All commands must extend the <code>mako\reactor\Command</code> base command and implement the <code>execute</code> method.</p>

<pre><code>&lt;?php

namespace app\commands;

use mako\reactor\Command;

class Hello extends Command
{
    public function execute()
    {
        $this-&gt;write('Hello, World!');
    }
}
</code></pre>

<p>You'll also want to tell your users (or remind yourself) what the command actually does. This is easily done using the <code>$commandInformation</code> property.</p>

<pre><code>&lt;?php

namespace app\commands;

use mako\reactor\Command;

class Hello extends Command
{
    protected $commandInformation =
    [
        'description' =&gt; 'Prints a greeting.',
    ];

    public function execute()
    {
        $this-&gt;write('Hello, World!');
    }
}
</code></pre>

<p><a id="basics:registering-commands"></a></p>

<h4>Registering commands</h4>

<p>You'll have to register your command with the reactor command line tool before you can use it.</p>

<p>Commands are registered in the <code>app/config/application.php</code> configuration file. The array key is the name of your command and the value is the command class name.</p>

<p>Check out the <a href="packages_packages.html#commands">this page</a> of the documentation to see how you register your custom commands in packages.</p>

<pre><code>'commands' =&gt;
[
    'hello' =&gt; 'app\commands\Hello',
],
</code></pre>

<p>You can now call your custom command like this.</p>

<pre><code>php reactor hello
</code></pre>

<p><a id="basics:arguments-and-options"></a></p>

<h4>Arguments and options</h4>

<p>Passing arguments to a command is easy as you can se in the example below.</p>

<pre><code>&lt;?php

namespace app\commands;

use mako\reactor\Command;

class Hello extends Command
{
    public function execute($arg2)
    {
        $this-&gt;write('Hello, ' . $arg2 . '!');
    }
}
</code></pre>

<blockquote>
  <p><code>$arg0</code> is the reactor script and <code>$arg1</code> is the name of the command.</p>
</blockquote>

<p>You can now execute your command from the command line.</p>

<pre><code>php reactor hello dude
</code></pre>

<p>You can also use options or "named arguments".</p>

<pre><code>&lt;?php

namespace app\commands;

use mako\reactor\Command;

class Hello extends Command
{
    public function execute($name)
    {
        $this-&gt;write('Hello, ' . $name . '!');
    }
}
</code></pre>

<p>You can now execute your command from the command line.</p>

<pre><code>php reactor hello --name=dude
</code></pre>

<p>Options can also be used as boolean flags.</p>

<pre><code>&lt;?php

namespace app\commands;

use mako\reactor\Command;

class Hello extends Command
{
    public function execute($shout = false)
    {
        $greeting = 'Hello, World!';

        if($shout !== false)
        {
            $greeting = strtoupper($greeting);
        }

        $this-&gt;write($greeting);
    }
}
</code></pre>

<p>You can now execute your command from the command line.</p>

<pre><code>php reactor hello --shout
</code></pre>

<p>Both arguments and options can be documented using the <code>$commandInformation</code> property.</p>

<pre><code>protected $commandInformation =
[
    'description' =&gt; 'Print out a greeting.',
    'options' =&gt;
    [
        'shout' =&gt;
        [
            'optional'    =&gt; true,
            'description' =&gt; 'Should we output upper-case?',
        ],
    ],
];
</code></pre>

<hr />

<p><a id="input"></a></p>

<h3>Input</h3>

<p><a id="input:helpers"></a></p>

<h4>Helpers</h4>

<p>The <code>question</code> method lets you ask the user for input.</p>

<pre><code>$input = $this-&gt;question('How old are you?');
</code></pre>

<p>You can also specify a default return value in the event that the user chooses not to enter anything. The default return value for empty input is <code>NULL</code>.</p>

<pre><code>$input = $this-&gt;question('How old are you?', 25);
</code></pre>

<p>The <code>secret</code> method lets you ask the user for hidden input.</p>

<pre><code>$input = $this-&gt;secret('Password:');
</code></pre>

<p>You can also specify a default return value in the event that the user chooses not to enter anything. The default return value for empty input is <code>NULL</code>.</p>

<pre><code>$input = $this-&gt;secret('Password:', false);
</code></pre>

<blockquote>
  <p>The <code>secret</code> method will throw a <code>RuntimeException</code> if its unable to hide the user input. You can make the method fall back to non-hidden input by passing <code>TRUE</code> to the optional third parameter.</p>
</blockquote>

<p>The <code>confirmation</code> method lets you ask the user for confirmation.</p>

<pre><code>if($this-&gt;confirmation('Do you want to delete all your files?'))
{
    // Delete all files
}
</code></pre>

<p>The default answer is <code>n</code> (false) but you can choose to make <code>y</code> (true) the default answer.</p>

<pre><code>if($this-&gt;confirmation('Do you want to delete all your files?', 'y'))
{
    // Delete all files
}
</code></pre>

<hr />

<p><a id="output"></a></p>

<h3>Output</h3>

<p><a id="output:helpers"></a></p>

<h4>Helpers</h4>

<p>The <code>write</code> method lets you write output.</p>

<pre><code>$this-&gt;write('Hello, World!');
</code></pre>

<p>The method writes to <code>STDOUT</code> by default but you can make it write to <code>STDERR</code> like this.</p>

<pre><code>$this-&gt;write('Hello, World!', Ouput::ERROR);
</code></pre>

<p>There's also a handy <code>error</code> method that lets you write to <code>STDERR</code>.</p>

<pre><code>$this-&gt;error('Hello, World!');
</code></pre>

<p>The <code>nl</code> method writes a newline to the output.</p>

<pre><code>$this-&gt;nl();
</code></pre>

<p>The <code>bell</code> method rings the terminal bell.</p>

<pre><code>$this-&gt;bell();
</code></pre>

<p>You can also make it ring multiple times if you want to.</p>

<pre><code>$this-&gt;bell(3);
</code></pre>

<p>The <code>countdown</code> method will print a countdown that dissapears after n seconds.</p>

<pre><code>$this-&gt;countdown(5);
</code></pre>

<p>The <code>progressBar</code> method will let you display a nice progressbar. This is useful if your command is processing multiple items.</p>

<pre><code>$items = 100;

$progressbar = $this-&gt;progressBar($items);

for($i = 0; $i &lt; $items; $i++)
{
    $progressbar-&gt;advance();
}
</code></pre>

<p>The <code>table</code> method lets you output a nice ASCII table.</p>

<pre><code>$this-&gt;table(['Col1', 'Col2'], [['R1 C1', 'R1 C2'], ['R2 C1', 'R2 C2']]);
</code></pre>

<p>This code above will result in a table looking like this.</p>

<pre><code>-----------------
| Col1  | Col2  |
-----------------
| R1 C1 | R1 C2 |
| R2 C1 | R2 C2 |
-----------------
</code></pre>

<p><a id="output:formatting"></a></p>

<h4>Formatting</h4>

<p>You can format your output using formatting tags.</p>

<pre><code>$this-&gt;write('&lt;blue&gt;Hello, World!&lt;/blue&gt;');
</code></pre>

<p>You can also nest formatting tags. Just make sure to close them in the right order.</p>

<pre><code>$this-&gt;write('&lt;bg_green&gt;&lt;black&gt;Hello, World&lt;/black&gt;&lt;yellow&gt;!&lt;yellow&gt;&lt;/bg_green&gt;');
</code></pre>

<p>Tags can also be escaped by prepending them with a backlash.</p>

<pre><code>$this-&gt;write('\&lt;blue&gt;Hello, World\&lt;/blue&gt;');
</code></pre>

<p>You can also escape all tags in a string using the <code>Formatter::escape()</code> method.</p>

<pre><code>$escaped = $this-&gt;output-&gt;getFormatter()-&gt;escape($string);
</code></pre>

<table class="bordered striped">
<thead>
<tr>
  <th>Tag</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>clear</td>
  <td>Clears all formatting styles</td>
</tr>
<tr>
  <td>bold</td>
  <td>Bold text</td>
</tr>
<tr>
  <td>faded</td>
  <td>Faded colors</td>
</tr>
<tr>
  <td>underlined</td>
  <td>Underlined text</td>
</tr>
<tr>
  <td>blinking</td>
  <td>Blinking text</td>
</tr>
<tr>
  <td>reversed</td>
  <td>Reversed text</td>
</tr>
<tr>
  <td>hidden</td>
  <td>Hidden text</td>
</tr>
<tr>
  <td>black</td>
  <td>Black text</td>
</tr>
<tr>
  <td>red</td>
  <td>Red text</td>
</tr>
<tr>
  <td>green</td>
  <td>Green text</td>
</tr>
<tr>
  <td>yellow</td>
  <td>Yellow text</td>
</tr>
<tr>
  <td>blue</td>
  <td>Blue text</td>
</tr>
<tr>
  <td>purple</td>
  <td>Purple text</td>
</tr>
<tr>
  <td>cyan</td>
  <td>Cyan text</td>
</tr>
<tr>
  <td>white</td>
  <td>white text</td>
</tr>
<tr>
  <td>bg_black</td>
  <td>Black background</td>
</tr>
<tr>
  <td>bg_red</td>
  <td>Red background</td>
</tr>
<tr>
  <td>bg_green</td>
  <td>Green background</td>
</tr>
<tr>
  <td>bg_yellow</td>
  <td>Yellow background</td>
</tr>
<tr>
  <td>bg_blue</td>
  <td>Blue background</td>
</tr>
<tr>
  <td>bg_purple</td>
  <td>Purple background</td>
</tr>
<tr>
  <td>bg_cyan</td>
  <td>Cyan background</td>
</tr>
<tr>
  <td>bg_white</td>
  <td>white background</td>
</tr>
</tbody>
</table>

<blockquote>
  <p>Note that formatting will only work on linux/unix and windows consoles with ANSI support.</p>
  
  <p>Formatting is stripped when the output is redirected (e.g. to a log file <code>php reactor command &gt; log.txt</code>).</p>
</blockquote>

<hr />

<p><a id="dependency_injection"></a></p>

<h3>Dependency injection</h3>

<p>Commands are instantiated by the <a href="getting-started_dependency-injection.html">dependency injection container</a>. This makes it easy to inject your dependencies using the constructor.</p>

<pre><code>&lt;?php

class Hello extends Command
{
    protected $config;

    public function __construct(Input $input, Output $output, Config $config)
    {
        parent::__construct($input, $output);

        $this-&gt;config = $config;
    }
}
</code></pre>

<blockquote>
  <p>Note that commands expect the first two constructor parameters to be instances of the <code>Input</code> and <code>Output</code> classes.</p>
</blockquote>

<p>You can also inject your dependencies directly into the <code>execute</code> method since its executed by the <code>Container::call()</code> method.</p>

<pre><code>public function execute(Config $config)
{
    $foo = $config-&gt;get('settings.foo');
}
</code></pre>

<p>Commands are also <code>container aware</code>. You can read more about what this means <a href="getting-started_dependency-injection.html#container-aware">here</a>.</p>
				</div>
			</div>
		</div>
	</div>


		</div>

		<footer>
			<div class="container">
				<div class="row">
					<div class="col l6 s12">
						<h5 class="white-text">Git</h5>
						<p class="grey-text lighten-4 github"></p>
						<p>
							<a href="https://travis-ci.org/mako-framework/framework">
								<img src="https://travis-ci.org/mako-framework/framework.svg?branch=master" alt="">
							</a>
						</p>
						<p>
							<a class="waves-effect waves-light btn grey darken-1" href="https://github.com/mako-framework/framework/issues">
								<span id="open-issues">?</span> Open Issues
							</a>
							<a class="waves-effect waves-light btn grey darken-1" href="https://github.com/mako-framework/framework/pulls">
								<span id="pull-requests">?</span> Pull Requests
							</a>
						</p>
					</div>
					<div class="col l4 offset-l2 s12">
						<h5 class="white-text">Links</h5>
						<ul>
							<li><a class="grey-text lighten-3" href="../../index.html">Home</a></li>
							<li><a class="grey-text lighten-3" href="../../changelog.html">Changelog</a></li>
							<li><a class="grey-text lighten-3" href="../4.html">Documentation</a></li>
							<li><a class="grey-text lighten-3" href="http://api.makoframework.com/">API</a></li>
							<li><a class="grey-text lighten-3" href="https://github.com/mako-framework/framework/issues">Issues</a></li>
							<li><a class="grey-text lighten-3" href="http://forum.makoframework.com/">Community</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="footer-copyright">
				<div class="container">
					© 2015 Frederic G. Østby - All Rights Reserved
					<a class="grey-text lighten-4 right" href="https://twitter.com/makoframework">&nbsp;<i class="fa fa-twitter"></i></a>
					<a class="grey-text lighten-4 right" href="https://github.com/mako-framework">&nbsp;<i class="fa fa-github-alt"></i></a>
				</div>
			</div>
		</footer>

		<a href="#0" class="cd-top">Top</a>

		<script type="text/javascript" src="../../assets/js/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="../../assets/js/jquery-ui.min.js"></script>
		<script type="text/javascript" src="../../assets/js/materialize.min.js"></script>
		<script type="text/javascript" src="../../assets/js/timeago.min.js"></script>
		<script type="text/javascript" src="../../assets/js/mako.js"></script>
		<script type="text/javascript" src="../../assets/js/prism.js"></script>
		<script type="text/javascript" src="../../assets/js/backtotop.js"></script>

	</body>

<!-- Mirrored from makoframework.com/docs/4.5/command-line:custom-commands by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 02 Aug 2015 15:42:09 GMT -->
</html>